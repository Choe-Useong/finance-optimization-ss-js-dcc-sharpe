# 상태공간 · 제임스-스타인 · DCC 기반 포트폴리오 최적화

## 개요

이 프로젝트는 시변적 모수와 추정 불확실성을 고려한 정량적 포트폴리오 최적화 프레임워크를 구현한 것입니다.
금융 시계열 분석에서 자주 문제되는 두 가지―① 기대수익률 추정의 불안정성, ② 모수의 시변성―을 동시에 다루도록 설계되었으며, 최종적으로 샤프비율 최대화를 통해 포트폴리오를 최적화하고 성과를 평가합니다.

*더 자세한 내용은 원분_논문.pdf를 참고해주세요.

---

## 방법론

### 1. 상태공간 모형 (Kalman filter / Local-level)

* 자산별 기대수익률을 잠재 상태 변수로 정의하고, 관측된 초과수익률 시계열을 통해 추정합니다.
* 칼만 필터(Kalman filter)를 활용해 시점별 기대수익률을 업데이트합니다.
* 경기 국면 전환이나 구조적 변화를 반영할 수 있는 동적 기대수익률 추정치를 산출합니다.

### 2. James–Stein Shrinkage

* 상태공간 기반 기대수익률은 잡음이 크므로 James–Stein 추정량을 적용하여 보정합니다.
* 수익률 추정치를 횡단면 평균값 방향으로 수축(shrinkage)시켜 추정 분산을 축소합니다.
* 이로써 극단적으로 치우친 포트폴리오 해를 억제하고, 안정적인 평균값을 제공합니다.

### 3. DCC-GARCH 기반 공분산 추정

* 개별 자산의 변동성은 GARCH(1,1)로 추정합니다.
* 자산 간 조건부 상관관계는 DCC(Dynamic Conditional Correlation) 구조로 추정합니다.
* 시변적 상관 구조를 반영함으로써, 시장 충격과 장기 패턴을 동시에 고려합니다.

### 4. 샤프비율 최적화

* 입력값: 상태공간+JS 기반 기대수익률, DCC-GARCH 기반 공분산 행렬.
* 목적함수: 샤프비율 최대화.
* 제약조건: 가중치 합 = 1, 공매도 불가.
* 수치적 최적화(scipy 사용) + L2 정규화 항 추가 → 해의 안정성을 확보합니다.

---

## 데이터

* 표본: 미국 상장 섹터 ETF 8종 (XLE, XLB, XLI, XLP, XLY, XLV, XLF, XLK) + 금 채굴 ETF(GDX).
* 제외: 상장 이력이 짧거나 규제·정책 종속성이 높은 섹터 (XLC, XLRE, XLU).
* 기간: 2006.05.22 ~ 2025.07.23 (일별 데이터).
* 수익률: 수정종가 로그 수익률 – 무위험 수익률(3M T-Bill, FRED).

---

## 성과 평가

세 가지 전략을 비교 분석했습니다:

1. Sharpe 전략

   * 상태공간+JS+DCC 기반 기대수익률·공분산 추정치를 활용합니다.
   * 목표 비중 ±5% 이탈 시 즉시 리밸런싱을 수행합니다.
2. Equal Weight 전략

   * 동일 비중으로 투자하며, 월말에 리밸런싱을 수행합니다.
3. SPY 벤치마크

   * S&P500 추종 ETF에 전액 투자합니다.

| 지표           | Sharpe 전략 | Equal Weight | SPY     |
| ------------ | --------- | ------------ | ------- |
| 누적 수익률       | 556.78%   | 423.99%      | 486.01% |
| CAGR         | 10.91%    | 9.54%        | 10.22%  |
| 최대 낙폭        | -49.99%   | -51.67%      | -55.19% |
| Calmar 비율    | 0.22      | 0.18         | 0.19    |
| Sharpe (월간)  | 0.72      | 0.64         | 0.70    |
| Sortino (월간) | 1.32      | 1.12         | 1.18    |

Sharpe 전략은 수익성과 안정성 모두에서 우월한 성과를 달성했으며, 특히 위험조정 성과 지표(Sharpe, Sortino, Calmar)에서 일관된 우위를 보였습니다.

---

## 결론

* 본 프레임워크는 시변적 기대수익률과 동적 공분산 구조를 동시에 반영하여, 전통적 정적 추정 기반 전략 대비 적응력과 안정성이 높습니다.
* 실증분석 결과, Sharpe 전략은 벤치마크 대비 더 높은 CAGR, 낮은 낙폭, 우수한 Sharpe/Sortino를 기록했습니다.
* 향후 확장 방향:

  * 글로벌 ETF 및 주식·채권 혼합전략 적용.
  * 거래비용·세금 고려.
  * 거시변수 통합 상태공간 모형 도입.
  
---
